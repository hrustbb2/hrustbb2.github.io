{"version":3,"file":"script.js","mappings":"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","sources":["webpack://spavto/./src/script.ts"],"sourcesContent":["let openRequest = indexedDB.open(\"store\", 1);\nopenRequest.onupgradeneeded = function(event) {\n    // версия существующей базы данных меньше 2 (или база данных не существует)\n    let db = openRequest.result;\n    switch(event.oldVersion) { // существующая (старая) версия базы данных\n      case 0:\n        // версия 0 означает, что на клиенте нет базы данных\n        // выполнить инициализацию\n        db.createObjectStore('books', {keyPath: 'id'});\n      case 1:\n        // на клиенте версия базы данных 1\n        // обновить\n    }\n  };\n\n  openRequest.onerror = function() {\n    console.error(\"Error\", openRequest.error);\n  };\n  \n  openRequest.onsuccess = function() {\n    let db = openRequest.result;\n    // продолжить работу с базой данных, используя объект db\n    db.onversionchange = function() {\n        db.close();\n        alert(\"База данных устарела, пожалуйста, перезагрузите страницу.\")\n      };\n\n    // db.createObjectStore('books')\n\n    let transaction = db.transaction(\"books\", \"readwrite\"); // (1)\n\n    // получить хранилище объектов для работы с ним\n    let books = transaction.objectStore(\"books\"); // (2)\n\n    let book = {\n    id: 'js2',\n    price: 10,\n    created: new Date()\n    };\n\n    let request = books.add(book); // (3)\n\n    request.onsuccess = function() { // (4)\n    console.log(\"Книга добавлена в хранилище\", request.result);\n    };\n\n    request.onerror = function() {\n    console.log(\"Ошибка\", request.error);\n    };\n  };\n\n  openRequest.onblocked = function() {\n    // это событие не должно срабатывать, если мы правильно обрабатываем onversionchange\n  \n    // это означает, что есть ещё одно открытое соединение с той же базой данных\n    // и он не был закрыт после того, как для него сработал db.onversionchange\n  };\n\n// Регистрация service worker\nif ('serviceWorker' in navigator) {\n    navigator.serviceWorker.register('/distr/js/service-worker.js')\n      .then(reg => console.log('Service Worker registered!', reg))\n      .catch(err => console.error('Service Worker registration failed:', err));\n\n      window.addEventListener('beforeinstallprompt', (e) => {\n          e.preventDefault();\n\n          const deferredPrompt = e;\n\n          const installButton = document.createElement('button');\n          installButton.textContent = 'Install App';\n          installButton.style.position = 'fixed';\n          installButton.style.top = '10px';\n          installButton.style.left = '50%';\n          installButton.style.transform = 'translateX(-50%)';\n          installButton.style.zIndex = '9999';\n          installButton.style.padding = '10px 20px';\n          installButton.classList.add('btn-grad');\n          installButton.style.color = 'white';\n          installButton.style.border = 'none';\n          installButton.style.borderRadius = '5px';\n          installButton.style.cursor = 'pointer';\n\n          installButton.addEventListener('click', () => {\n\n              (<any>deferredPrompt).prompt();\n\n              (<any>deferredPrompt).userChoice.then((choiceResult:any) => {\n                  if (choiceResult.outcome === 'accepted') {\n                      console.log('App installed');\n                  } else {\n                      console.log('App installation declined');\n                  }\n\n                  installButton.style.display = 'none';\n              });\n          });\n\n          document.body.appendChild(installButton);\n      });\n  }"],"names":[],"sourceRoot":""}
{"version":3,"file":"sw.js","mappings":";;;;;;;;;AAAA,wCAAwC;AACxC,yIAAyI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEzI,gEAAgE;AAChE,qBAAqB;AACrB,8CAA8C;AAC9C,qCAAqC;AACrC,0CAA0C;AAC1C,SAAS;AACT,OAAO;AACP,MAAM;AAEN,yDAAyD;AACzD,uBAAuB;AACvB,qDAAqD;AACrD,iDAAiD;AACjD,SAAS;AACT,OAAO;AACP,MAAM;AAEN,IAAM,YAAY,GAAG,iBAAiB,CAAC;AAEvC,SAAS,gBAAgB,CAAC,GAAQ;IAC9B;;OAEG;IACH,SAAe,gBAAgB;;;;;;wBACrB,KAAK,GAAG,CAAC,GAAG,EAAE,aAAa,EAAE,kBAAkB,EAAE,iBAAiB,EAAE,gBAAgB,EAAE,mBAAmB,CAAC,CAAC;wBAC/F,qBAAM,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;;wBAA3C,SAAS,GAAG,SAA+B;wBACjD,qBAAM,OAAO,CAAC,GAAG,CACb,KAAK,CAAC,GAAG,CAAC,UAAU,GAAG;gCACnB,OAAO,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,UAAU,MAAM;oCAC5C,OAAO,CAAC,GAAG,CAAC,WAAI,GAAG,uBAAa,MAAM,CAAC,MAAM,CAAC,CAAE,CAAC,CAAC;gCACtD,CAAC,CAAC,CAAC;4BACP,CAAC,CAAC,CACL;;wBAND,SAMC,CAAC;;;;;KACL;IAED,8CAA8C;IAC9C,GAAG,CAAC,SAAS,CAAC,gBAAgB,EAAE,CAAC,CAAC;AACtC,CAAC;AAED,SAAS,cAAc,CAAC,GAAQ;IAC5B,SAAe,YAAY;;;;;4BACT,qBAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;;wBAA5C,KAAK,GAAG,SAAoC;wBAC3B,qBAAM,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC;;wBAA/C,cAAc,GAAG,SAA8B;wBACrD,IAAI,cAAc,EAAE,CAAC;4BACjB,sBAAO,cAAc,EAAC;wBAC1B,CAAC;wBAEY,qBAAM,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC;;wBAA/B,IAAI,GAAG,SAAwB;wBACrC,qBAAM,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC;;wBAA1C,SAA0C,CAAC;wBAC3C,sBAAO,IAAI,EAAC;;;;KACf;IAED,GAAG,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC,CAAC;AACpC,CAAC;AAED,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,gBAAgB,CAAC,CAAC;AACnD,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,cAAc,CAAC,CAAC;;;;;;;;UE3D/C;UACA;UACA;UACA;UACA","sources":["webpack://spavto/./spa/sw.ts","webpack://spavto/webpack/before-startup","webpack://spavto/webpack/startup","webpack://spavto/webpack/after-startup"],"sourcesContent":["// const CACHE_NAME = 'my-pwa-cache-v1';\n// const urlsToCache = ['/', '/index.html', '/distr/js/script.js', '/distr/js/service-worker.js', '/manifest.json', '/icon-180x180.png'];\n\n// self.addEventListener('install', (event:ExtendableEvent) => {\n//   event.waitUntil(\n//     caches.open(CACHE_NAME).then(cache => {\n//       console.log('Opened cache');\n//       return cache.addAll(urlsToCache);\n//     })\n//   );\n// });\n\n// self.addEventListener('fetch', (event:FetchEvent) => {\n//   event.respondWith(\n//     caches.match(event.request).then(response => {\n//       return response || fetch(event.request);\n//     })\n//   );\n// });\n\nconst CACHE_STATIC = 'static-cache-v5';\n\nfunction hndlEventInstall(evt: any) {\n    /**\n     * @returns {Promise<void>}\n     */\n    async function cacheStaticFiles() {\n        const files = ['/', '/index.html', '/distr/js/spa.js', '/distr/js/sw.js', '/manifest.json', '/icon-180x180.png'];\n        const cacheStat = await caches.open(CACHE_STATIC);\n        await Promise.all(\n            files.map(function (url) {\n                return cacheStat.add(url).catch(function (reason) {\n                    console.log(`'${url}' failed: ${String(reason)}`);\n                });\n            })\n        );\n    }\n\n    //  wait until all static files will be cached\n    evt.waitUntil(cacheStaticFiles());\n}\n\nfunction hndlEventFetch(evt: any) {\n    async function getFromCache() {\n        const cache = await self.caches.open(CACHE_STATIC);\n        const cachedResponse = await cache.match(evt.request);\n        if (cachedResponse) {\n            return cachedResponse;\n        }\n        // wait until resource will be fetched from server and stored in cache\n        const resp = await fetch(evt.request);\n        await cache.put(evt.request, resp.clone());\n        return resp;\n    }\n\n    evt.respondWith(getFromCache());\n}\n\nself.addEventListener('install', hndlEventInstall);\nself.addEventListener('fetch', hndlEventFetch);","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = {};\n__webpack_modules__[\"./spa/sw.ts\"]();\n",""],"names":[],"sourceRoot":""}